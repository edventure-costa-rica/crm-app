<h1><%=t '.title', :for => @client ? @client : @company %></h1>

<% if @trip then %>
<p><%=t '.desc', :link => link_to(@trip, [@trip.client, @trip]) %></p>
<% end %>

<table class="styled">
  <tr>
    <th><%=h t '.date' %></th>
<% unless @client %>
    <th><%=h re_f :client %></th>
    <th><%=h re_f :trip_id %></th>
<% else %>
    <th><%=h co_f :city %></th>
    <th><%=h re_f :company %></th>
    <th><%=h re_f :confirmed %></th>
    <th><%=h re_f :paid %></th>
<% end %>
    <th><%=h re_f :services %></th>
  </tr>

<% @reservations.each do |reservation| %>
  <tr class="<%= cycle 'even', 'odd' %>">
    <td>
      <%= if @client then 
            h l reservation.arrival, :format => :short
          else
            h l reservation.arrival, :format => :long
          end %>
    </td>
<% unless @client %>
    <td><%=h reservation.client %></td>
    <td><%=h reservation.trip %></td>
<% else %>
    <td><%=h reservation.city %></td>
    <td><%=h reservation.company && reservation.company.name %></td>
    <td><%=h reservation.confirmed ? t(:true) : t(:false) %></td>
    <td><%=h reservation.paid ? t(:true) : t(:false) %></td>
<% end %>
    <td><%=hnl reservation.services.nil? ? '' : reservation.services[0,50] + (reservation.services.length > 50 ? '...' : '') %></td>
    <td><%= link_to t(:show), [reservation.client, reservation.trip, reservation] %> |
        <%= link_to t(:edit), edit_client_trip_reservation_path(reservation.client, reservation.trip, reservation) %> |
        <%= link_to t(:delete), [reservation.client, reservation.trip, reservation], :confirm => t(:confirm), :method => :delete %>
    </td>
  </tr>
<% end %>
</table>

<br />

<%= render :partial => 'links' if @client and @trip %>
