<% form_for(@trip) do |f| %>
  <%= f.error_messages %>

  <p><%=f.label :client %>: <%= link_to @client.family_name, @client %></p>

  <p>
  <p>
    <%= f.label :status %>
    <%= f.select :status, Trip.statuses.
          map { |s| [ tr_f(s), s ] }, {}, { :onchange =>
            '$("confirm-date")[this.value=="confirmed"?"show":"hide"]()' }
    %>
  </p>
  <p id="confirm-date" style="<%=
        'display:none' unless @trip.status == 'confirmed' %>">
    <%= f.label :confirmation_date %><br/>
    <%= f.date_select :confirmation_date,
          :include_blank => true,
          :start_year => Time.now.year - 1,
          :end_year => Time.now.year + 1
    %>
  </p>
    <%= f.label :arrival %><br />
    <%= f.datetime_select :arrival,
          :include_blank => true,
          :start_year    => Time.now.year - 1
    %>
  </p>
  <p>
    <%= f.label :arrival_flight %><br/>
    <%= f.text_field :arrival_flight %>
  </p>
  <p>
    <%= f.label :departure %><br />
    <%= f.datetime_select :departure,
          :include_blank => true,
          :start_year    => Time.now.year - 1
    %>
  </p>
  <p>
    <%= f.label :departure_flight %><br/>
    <%= f.text_field :departure_flight %>
  </p>
  <p>
    <%= f.label :total_people %><br />
    <%= f.text_field :total_people %>
  </p>
  <p>
    <%= f.label :num_children %><br />
    <%= f.text_field :num_children %>
  </p>
  <p>
    <%= f.label :num_disabled %><br />
    <%= f.text_field :num_disabled %>
  </p>
  <p>
    <%= f.label :payment_pct %>
    <%= f.select :payment_pct,
          [ 0, 15, 50, 85, 100 ].
          map { |pct| [ number_to_percentage(pct, :precision => 0), pct ] },
          { :prompt => true }
    %>
  </p>
  <p>
    <%= f.label :payment_details %><br />
    <%= f.text_area :payment_details, :rows => 4 %>
  </p>
  <p>
    <%= f.label :notes %><br />
    <%= f.text_area :notes %>
  </p>
  <p>
    <%= f.submit submit_text %>
  </p>
<% end %>
